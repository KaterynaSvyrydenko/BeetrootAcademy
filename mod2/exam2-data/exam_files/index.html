<html>
    <head>
       <title>MediaPlayer</title>
       <meta charset="utf-8">
       <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
       <link rel="stylesheet" href="normalize.css">
       <link rel="stylesheet" href='style.css'>
     </head>
     <body>
        <div class='layout'>
            <div class='player'>
                <div class='player_header'>
                    <div class='header_logo'></div>
                    <div class='header_nav'>
                        <div class='header_button'></div>
                        <div class='header_button'></div>
                        <div class='header_button'></div>
                    </div>
                </div>
                <div class='player_main'>
                    <div class='player_albumCover'>
                        <div class='albumCover_img'> 
                            <img src='img/01.jpg'></div>
                        <div class='albumCover_h1'>Time to Pretend</div>
                        <div class='albumCover_h2'>MGMT, Time to Pretend</div>
                    </div>
                    <ul class='player_list'>
                             <audio id='player'>
                                <source id='song_1' type="audio/mpeg">
                                <li class='list_item _active'>Time to Pretend</li>  
                            </audio>

                    </ul>
                </div>
                <div class='player_footer'>
                    <div class="footer_nav">
                        <div class="control section">
                            <a href="" id='previous'>
                                <div class='previous'></div>
                            </a>
                            <a href="#" id='play'>
                                <div class='play'></div>
                            </a>
                            <a href="" id='next'>
                                <div class='next'></div>
                            </a>
                        </div>
                        <div class="timer section">
                            <a href="" id='song_timer'>
                                <div class='song_timer'></div>
                            </a>
                        </div>
                        <div class="special section">
                            <a href="" id='sound'>
                                <div class='sound'></div>
                            </a>
                            <a href="" id='mix'>
                                <div class='mix'></div>
                            </a>
                            <a href="" id='circle'>
                                <div class='circle'></div>
                            </a>
                            <a href="" id='share'>
                                <div class='share'></div>
                            </a>
                        </div>
                    </div>
                </div>
        </div>
        <script>
            const SONG = document.querySelector('#song_1');

            document.querySelector("#play").addEventListener('click', soundClick);

            function soundClick(){
                let ajax = new XMLHttpRequest();
                ajax.open('GET', 'playlist.json', true);
                ajax.onreadystatechange = function() {
                    if(ajax.readyState != 4) {
                        console.log("ERROR");
                        return;
                    }
                    console.log("LOADED");
                    JSON.parse(ajax.responseText).playlist.forEach((item) => {
                        var value = 'track/' + item.file;
                        console.log(value);
                        SONG.setAttribute('src', value);
                    });
                    var player = document.querySelector('#player');
                    console.log(player.audioTracks);
                    player.load();
                    player.play();
                };
                ajax.send();

            };
        </script>
    </body> 
</html>
